import { DecoratorTypes } from "@tsed/core/types/DecoratorTypes.js";
import { decoratorTypeOf } from "@tsed/core/utils/decoratorTypeOf.js";
import { configuration } from "../fn/configuration.js";
import { injectable } from "../fn/injectable.js";
import { injector } from "../fn/injector.js";
import { DIConfiguration } from "../services/DIConfiguration.js";
import { Inject } from "./inject.js";
export function Configuration(settings = {}) {
    return (...args) => {
        switch (decoratorTypeOf(args)) {
            case DecoratorTypes.CLASS:
                configuration(args[0], settings);
                break;
            default:
            case DecoratorTypes.PARAM_CTOR:
                return Inject(DIConfiguration)(args[0], args[1], args[2]);
        }
    };
}
// To maintain compatibility with the previous implementation, we need to declare Configuration as
// injectable token.
injectable(Configuration).factory(() => injector().settings);
