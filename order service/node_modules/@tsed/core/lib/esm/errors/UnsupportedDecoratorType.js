import { classOf } from "../utils/classOf.js";
import { decoratorTypeOf } from "../utils/decoratorTypeOf.js";
import { nameOf } from "../utils/nameOf.js";
export class UnsupportedDecoratorType extends Error {
    constructor(decorator, args) {
        super(UnsupportedDecoratorType.buildMessage(decorator, args));
    }
    static buildMessage(decorator, args) {
        const [target, propertyKey, index] = args;
        const bindingType = decoratorTypeOf(args);
        const shortBinding = bindingType.split("/")[0];
        const param = shortBinding === "parameter" ? ".[" + index + "]" : "";
        const cstr = shortBinding === "parameter" ? ".constructor" : "";
        const method = propertyKey ? "." + propertyKey : cstr;
        const path = nameOf(classOf(target)) + method + param;
        return `${decorator.name} cannot be used as ${bindingType} decorator on ${path}`;
    }
}
